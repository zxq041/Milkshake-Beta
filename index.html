<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>MilkShake Bar PWA</title>

  <meta name="theme-color" content="#FF6A00" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <style>
    :root{
      --primary:#FF6A00;
      --secondary:#FF9100;
      --accent:#FFE0B2;
      --bg:#FFF6EC;
      --text:#2B1300;
      --white:#fff;
      --grad:linear-gradient(135deg,var(--primary),var(--secondary));
      --radius:20px;
      --shadow:0 12px 34px rgba(0,0,0,.12);
      --glass:rgba(255,255,255,.78);
      --glass-strong:rgba(255,255,255,.95);
      --success:#16A34A;
      --danger:#DC2626;
      --link:#8a3d00;
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:Poppins,system-ui,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
      min-height:100vh;
      -webkit-font-smoothing:antialiased;
      padding-bottom: calc(118px + var(--safe-bottom)); /* miejsce na dolne menu */
    }

    /* Decorative blobs */
    .blob{
      position:fixed;z-index:-1;filter:blur(60px);opacity:.35;
      width:260px;height:260px;border-radius:50%;
      background:radial-gradient(circle at 30% 30%, #ffd1a8, transparent 60%), var(--grad);
    }
    .blob.b1{top:-60px;left:-60px}
    .blob.b2{bottom:-90px;right:-70px;transform:rotate(25deg)}

    /* App shell topbar */
    .topbar{
      position:sticky;top:0;z-index:20;
      padding: calc(10px + var(--safe-top)) 14px 10px;
      background:rgba(255,246,236,.94);
      backdrop-filter:blur(14px);
      border-bottom:1px solid rgba(0,0,0,.06);
      display:flex;align-items:center;justify-content:space-between;
    }
    .brand{
      display:flex;align-items:center;gap:10px;font-weight:900;
      font-size:1.05rem;letter-spacing:.2px;
    }
    .brand .dot{
      width:36px;height:36px;border-radius:12px;
      background:var(--grad);
      display:grid;place-items:center;color:#fff;
      box-shadow:0 6px 16px rgba(255,106,0,.5);
    }
    .pill{
      background:var(--grad);
      color:#fff;font-weight:900;font-size:.85rem;
      padding:7px 11px;border-radius:999px;
      display:flex;gap:7px;align-items:center;
      box-shadow:0 6px 16px rgba(255,106,0,.35);
    }

    /* Layout */
    .container{padding:14px;max-width:820px;margin:0 auto;}
    .stack{display:flex;flex-direction:column;gap:12px;}
    .card{
      background:var(--glass);
      backdrop-filter:blur(12px);
      border:1px solid rgba(255,255,255,.95);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px;
    }
    .card.soft{
      background:rgba(255,255,255,.6);
      border-style:dashed;
    }
    .title{
      font-size:1.6rem;font-weight:900;
      background:var(--grad);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      margin-bottom:6px;
    }
    .subtitle{font-weight:900;margin-bottom:8px;font-size:1.05rem;}
    .muted{opacity:.8;font-size:.95rem;line-height:1.55}
    .tiny{font-size:.82rem;opacity:.7}

    /* Section header (mobile feel) */
    .section-head{
      display:flex;align-items:center;justify-content:space-between;
      margin:2px 2px 8px;
    }
    .section-head h3{
      font-size:1.15rem;font-weight:900;
    }
    .section-head .badge{
      font-size:.8rem;font-weight:900;padding:6px 10px;border-radius:999px;
      background:rgba(0,0,0,.05);
    }

    /* Inputs */
    label{font-size:.9rem;font-weight:900;margin:8px 0 6px;display:block}
    input,select,textarea{
      width:100%;padding:12px 14px;border-radius:14px;
      border:2px solid #eee;background:var(--white);
      font-size:1rem;outline:none;
      transition:.2s border-color,.2s box-shadow,.2s transform;
      font-family:inherit;
    }
    input:focus,select:focus,textarea:focus{
      border-color:var(--primary);
      box-shadow:0 6px 18px rgba(255,106,0,.12);
      transform:translateY(-1px);
    }
    textarea{min-height:84px;resize:vertical}

    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .row-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}

    .btn{
      border:none;cursor:pointer;font-weight:900;border-radius:16px;
      padding:12px 14px;display:inline-flex;align-items:center;gap:8px;
      transition:.2s transform,.2s box-shadow,.2s opacity,.2s background;
      text-decoration:none;user-select:none;-webkit-tap-highlight-color: transparent;
      justify-content:center;
    }
    .btn:active{transform:translateY(1px)}
    .btn-primary{
      background:var(--grad);color:#fff;
      box-shadow:0 8px 22px rgba(255,106,0,.5);
    }
    .btn-ghost{
      background:rgba(255,255,255,.9);
      border:1px solid rgba(0,0,0,.06);
      color:var(--text);
    }
    .btn-dark{
      background:#111;color:#fff;border:1px solid #000;
      box-shadow:0 8px 22px rgba(0,0,0,.22);
    }
    .btn-small{padding:8px 10px;font-size:.9rem;border-radius:12px}
    .btn-wide{width:100%;}

    /* Tabs + transitions */
    .tab{display:none;animation:fade .22s ease}
    .tab.active{display:block}
    @keyframes fade{
      from{opacity:0;transform:translateY(8px) scale(.99)}
      to{opacity:1;transform:none}
    }

    /* Points hero */
    .points-hero{
      background:var(--grad);color:#fff;border-radius:20px;padding:16px;
      display:grid;grid-template-columns:1fr auto;gap:10px;align-items:center;
      box-shadow:var(--shadow);position:relative;overflow:hidden;
    }
    .points-hero::after{
      content:"";position:absolute;right:-40px;top:-40px;width:160px;height:160px;
      background:radial-gradient(circle, rgba(255,255,255,.45), transparent 60%);
      transform:rotate(18deg);
    }
    .points-count{font-size:2.4rem;font-weight:900;letter-spacing:.6px;line-height:1;}
    .points-sub{display:flex;gap:8px;align-items:center;margin-top:6px;flex-wrap:wrap;}
    .chip{
      background:rgba(255,255,255,.2);
      padding:6px 9px;border-radius:999px;font-weight:900;font-size:.8rem;
      display:inline-flex;gap:6px;align-items:center;
    }
    .progress{margin-top:10px;background:rgba(255,255,255,.24);height:10px;border-radius:999px;overflow:hidden;}
    .progress > div{height:100%;background:rgba(255,255,255,.96);width:0%;transition:width .35s ease;border-radius:999px;}

    /* Quick actions */
    .quick-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:10px;}
    .quick{
      background:var(--glass-strong);border:1px solid rgba(0,0,0,.04);
      border-radius:16px;padding:12px;display:grid;gap:6px;place-items:center;text-align:center;
      box-shadow:0 6px 18px rgba(0,0,0,.06);
      transition:.2s transform,.2s box-shadow;
      -webkit-tap-highlight-color: transparent;
    }
    .quick:active{transform:translateY(1px)}
    .quick i{
      width:44px;height:44px;border-radius:14px;display:grid;place-items:center;
      background:var(--grad);color:#fff;box-shadow:0 6px 16px rgba(255,106,0,.45);
      font-size:1.1rem;
    }
    .quick b{font-size:.95rem;font-weight:900}
    .quick span{font-size:.8rem;opacity:.7}

    /* Rewards */
    .reward{
      display:flex;gap:12px;align-items:center;justify-content:space-between;
      background:var(--glass-strong);border-radius:18px;padding:12px;
      border:1px solid rgba(0,0,0,.04);box-shadow:0 6px 18px rgba(0,0,0,.06);
    }
    .reward-left{display:flex;gap:12px;align-items:center;}
    .reward-ico{
      width:52px;height:52px;border-radius:16px;background:var(--grad);color:#fff;display:grid;place-items:center;
      box-shadow:0 6px 16px rgba(255,106,0,.45);font-size:1.25rem;
    }
    .reward-title{font-weight:900}
    .reward + .reward{margin-top:10px}

    /* News */
    .news{
      background:var(--glass-strong);border-radius:18px;padding:12px;border:1px solid rgba(0,0,0,.04);
      box-shadow:0 6px 18px rgba(0,0,0,.06);
    }
    .news h4{font-size:1.05rem;margin-bottom:6px;font-weight:900}
    .news .date{font-size:.82rem;opacity:.65;margin-bottom:6px}

    /* Reservations */
    .res-item{
      padding:10px;border-radius:14px;background:#fff;border:1px solid #eee;display:grid;gap:4px;
    }
    .res-item b{font-weight:900}
    .res-actions{display:flex;gap:8px;margin-top:6px;flex-wrap:wrap;}
    .divider{height:1px;background:rgba(0,0,0,.06);margin:4px 0 0;}

    /* Account UI */
    .account-hero{
      display:flex;gap:12px;align-items:center;
    }
    .avatar{
      width:56px;height:56px;border-radius:16px;background:var(--grad);display:grid;place-items:center;
      color:#fff;font-size:1.3rem;font-weight:900;box-shadow:0 8px 20px rgba(255,106,0,.5);
    }
    .account-name{font-weight:900;font-size:1.1rem}
    .account-mail{font-size:.9rem;opacity:.75}

    .list{
      display:flex;flex-direction:column;gap:8px;
    }
    .list-item{
      background:var(--glass-strong);border:1px solid rgba(0,0,0,.04);
      padding:12px;border-radius:16px;display:flex;align-items:center;justify-content:space-between;
      box-shadow:0 6px 16px rgba(0,0,0,.06);
      cursor:pointer;transition:.2s transform,.2s box-shadow;
      -webkit-tap-highlight-color: transparent;
    }
    .list-item:active{transform:translateY(1px)}
    .list-left{display:flex;gap:10px;align-items:center;}
    .li-ico{
      width:40px;height:40px;border-radius:12px;background:rgba(0,0,0,.05);
      display:grid;place-items:center;font-size:1.05rem;
    }
    .li-title{font-weight:900}
    .li-sub{font-size:.85rem;opacity:.7}

    /* Auth modal/page */
    .auth-wrap{
      display:grid;gap:10px;
    }
    .auth-btn{
      width:100%;justify-content:center;font-weight:900;
    }
    .auth-btn.google{background:#fff;border:2px solid #eee;}
    .auth-btn.apple{background:#111;color:#fff;}
    .auth-sep{
      display:flex;align-items:center;gap:10px;margin:6px 0;
    }
    .auth-sep::before,.auth-sep::after{
      content:"";flex:1;height:1px;background:rgba(0,0,0,.08);
    }
    .auth-sep span{font-size:.85rem;opacity:.7;font-weight:800;}

    /* Subpages inside account */
    .subpage{
      position:fixed;inset:0;background:var(--bg);z-index:80;
      display:none;flex-direction:column;
      animation:slideIn .25s ease;
      padding-bottom: calc(20px + var(--safe-bottom));
    }
    .subpage.active{display:flex;}
    @keyframes slideIn{
      from{opacity:0;transform:translateX(8px)}
      to{opacity:1;transform:none}
    }
    .sub-top{
      position:sticky;top:0;z-index:5;
      padding: calc(10px + var(--safe-top)) 14px 10px;
      background:rgba(255,246,236,.96);
      backdrop-filter:blur(12px);
      border-bottom:1px solid rgba(0,0,0,.06);
      display:flex;align-items:center;gap:10px;
    }
    .back-btn{
      width:40px;height:40px;border-radius:12px;border:none;background:#fff;cursor:pointer;
      display:grid;place-items:center;box-shadow:0 4px 12px rgba(0,0,0,.08);
    }
    .sub-title{font-weight:900;font-size:1.05rem}

    /* Empty state */
    .empty{
      background:var(--glass-strong);padding:14px;border-radius:16px;border:1px dashed rgba(0,0,0,.07);
      display:flex;gap:12px;align-items:center;
    }
    .empty .icon{
      width:48px;height:48px;border-radius:14px;background:var(--grad);color:#fff;display:grid;place-items:center;font-size:1.2rem;
      box-shadow:0 6px 14px rgba(255,106,0,.4);
    }

    /* Bottom floating nav */
    .bottom-nav{
      position:fixed;left:0;right:0;bottom:10px;z-index:50;
      display:flex;justify-content:center;pointer-events:none;
    }
    .nav-wrap{
      pointer-events:auto;
      width:min(820px,calc(100% - 18px));
      background:rgba(255,255,255,.8);
      backdrop-filter:blur(14px);
      border:1px solid rgba(255,255,255,.98);
      box-shadow:0 10px 28px rgba(0,0,0,.18);
      border-radius:999px;padding:6px;
      display:grid;grid-template-columns:repeat(5,1fr);gap:6px;
    }
    .nav-btn{
      background:transparent;border:none;cursor:pointer;border-radius:999px;
      padding:9px 6px;display:flex;flex-direction:column;align-items:center;gap:4px;
      font-weight:900;color:var(--text);opacity:.7;transition:.2s all;
      -webkit-tap-highlight-color: transparent;
    }
    .nav-btn i{font-size:1.12rem}
    .nav-btn.active{
      background:var(--grad);color:#fff;opacity:1;transform:translateY(-2px);box-shadow:0 8px 18px rgba(255,106,0,.45);
    }
    .nav-btn .lbl{font-size:.73rem;line-height:1}

    /* Toast */
    .toast{
      position:fixed;left:50%;bottom: calc(126px + var(--safe-bottom));transform:translateX(-50%) translateY(8px);
      background:var(--success);color:#fff;font-weight:900;font-size:.95rem;
      padding:10px 14px;border-radius:999px;box-shadow:0 10px 25px rgba(0,0,0,.25);
      opacity:0;pointer-events:none;transition:.25s;z-index:999;display:flex;gap:8px;align-items:center;
    }
    .toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
    .toast.danger{background:var(--danger)}

    @media (max-width:560px){
      .row,.row-3{grid-template-columns:1fr}
      .quick-grid{grid-template-columns:1fr 1fr 1fr}
    }
    @media (max-width:380px){
      .quick-grid{grid-template-columns:1fr 1fr}
      .nav-wrap{gap:4px}
    }
  </style>
</head>
<body>
  <div class="blob b1"></div>
  <div class="blob b2"></div>

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="brand">
      <div class="dot"><i class="fa-solid fa-ice-cream"></i></div>
      MilkShake Bar
    </div>
    <div class="pill"><i class="fa-solid fa-star"></i> <span id="pointsPill">0 pkt</span></div>
  </div>

  <main class="container">

    <!-- TAB: PUNKTY -->
    <section id="tab-points" class="tab active">
      <div class="points-hero">
        <div>
          <div class="tiny">Twoje punkty</div>
          <div class="points-count" id="pointsCount">0</div>
          <div class="points-sub">
            <div class="chip"><i class="fa-solid fa-receipt"></i> 1 z≈Ç = 1 pkt</div>
            <div class="chip"><i class="fa-solid fa-gift"></i> nagrody od 80 pkt</div>
          </div>
        </div>
        <button class="btn btn-ghost btn-small" id="scanBtn">
          <i class="fa-solid fa-qrcode"></i> Skanuj QR
        </button>
      </div>
      <div class="progress"><div id="pointsProgress"></div></div>

      <div class="card">
        <div class="subtitle">Szybkie akcje</div>
        <div class="quick-grid">
          <button class="quick" data-go="rewards">
            <i class="fa-solid fa-gift"></i>
            <b>Nagrody</b>
            <span>Wymie≈Ñ punkty</span>
          </button>
          <button class="quick" data-go="res">
            <i class="fa-solid fa-calendar-check"></i>
            <b>Rezerwuj</b>
            <span>Stolik w 10s</span>
          </button>
          <button class="quick" data-go="news">
            <i class="fa-solid fa-bolt"></i>
            <b>Aktualno≈õci</b>
            <span>Nowo≈õci i promo</span>
          </button>
        </div>
      </div>

      <div class="card soft">
        <div class="subtitle">Dodaj punkty rƒôcznie (testowo)</div>
        <div class="row-3">
          <button class="btn btn-primary" data-add="5">+5 pkt</button>
          <button class="btn btn-primary" data-add="10">+10 pkt</button>
          <button class="btn btn-primary" data-add="25">+25 pkt</button>
        </div>
        <p class="muted" style="margin-top:8px">
          Docelowo: punkty z QR / paragonu od obs≈Çugi.
        </p>
      </div>

      <div class="card">
        <div class="subtitle">Historia punkt√≥w</div>
        <div id="pointsHistory" class="muted"></div>
      </div>
    </section>

    <!-- TAB: NAGRODY -->
    <section id="tab-rewards" class="tab">
      <div class="card">
        <div class="title">Nagrody</div>
        <p class="muted">Kliknij ‚ÄûWymie≈Ñ‚Äù, a poka≈ºemy Ci kod do odbioru w lokalu.</p>
      </div>

      <div class="card" id="rewardsList"></div>
    </section>

    <!-- TAB: REZERWACJE -->
    <section id="tab-res" class="tab">
      <div class="card">
        <div class="title">Rezerwacje</div>
        <p class="muted">Zarezerwuj stolik w kilka sekund. Potwierdzenie dostaniesz SMS lub telefonicznie.</p>
      </div>

      <div class="card">
        <div class="subtitle">Formularz rezerwacji</div>
        <form id="reservationForm" class="stack">
          <div>
            <label>Imiƒô i nazwisko</label>
            <input name="name" required placeholder="Jan Kowalski">
          </div>

          <div>
            <label>Telefon</label>
            <input name="phone" required placeholder="+48 700 000 000">
          </div>

          <div class="row">
            <div>
              <label>Data</label>
              <input type="date" name="date" required>
            </div>
            <div>
              <label>Godzina</label>
              <input type="time" name="time" required>
            </div>
          </div>

          <div class="row">
            <div>
              <label>Ilo≈õƒá os√≥b</label>
              <select name="guests" required>
                <option value="1">1 osoba</option>
                <option value="2" selected>2 osoby</option>
                <option value="3">3 osoby</option>
                <option value="4">4 osoby</option>
                <option value="5+">5+ os√≥b</option>
              </select>
            </div>
            <div>
              <label>Strefa</label>
              <select name="room" required>
                <option>Sala frontowa</option>
                <option>Sala g≈Ç√≥wna</option>
                <option>KƒÖcik dla dzieci</option>
              </select>
            </div>
          </div>

          <div>
            <label>Uwagi (opcjonalnie)</label>
            <textarea name="notes" placeholder="np. urodziny, alergie"></textarea>
          </div>

          <button class="btn btn-primary btn-wide">
            Zarezerwuj <i class="fa-solid fa-check"></i>
          </button>
        </form>
      </div>

      <div class="card">
        <div class="subtitle">Twoje rezerwacje</div>
        <div id="reservationsList" class="muted"></div>
      </div>
    </section>

    <!-- TAB: AKTUALNO≈öCI -->
    <section id="tab-news" class="tab">
      <div class="card">
        <div class="title">Aktualno≈õci</div>
        <p class="muted">Nowo≈õci, promocje i og≈Çoszenia z MilkShake Bar.</p>
      </div>

      <div class="card stack" id="newsList"></div>
    </section>

    <!-- TAB: KONTO -->
    <section id="tab-account" class="tab">
      <!-- if not logged -->
      <div id="accountLoggedOut" class="stack">
        <div class="card">
          <div class="title">Konto</div>
          <p class="muted">Zaloguj siƒô, aby synchronizowaƒá punkty, nagrody i rezerwacje na wszystkich urzƒÖdzeniach.</p>
        </div>

        <div class="card auth-wrap">
          <div class="subtitle">Zaloguj siƒô</div>

          <button class="btn auth-btn google" id="loginGoogle">
            <i class="fa-brands fa-google"></i> Kontynuuj z Google
          </button>

          <button class="btn auth-btn apple" id="loginApple">
            <i class="fa-brands fa-apple"></i> Kontynuuj z Apple ID
          </button>

          <div class="auth-sep"><span>lub</span></div>

          <form id="loginEmailForm" class="stack">
            <div>
              <label>Email</label>
              <input type="email" name="email" placeholder="np. klient@mail.com" required>
            </div>
            <div>
              <label>Has≈Ço</label>
              <input type="password" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
            </div>
            <button class="btn btn-primary btn-wide">
              Zaloguj siƒô <i class="fa-solid fa-right-to-bracket"></i>
            </button>
            <p class="tiny">Nie masz konta? <span style="font-weight:900;color:var(--link)">Za≈Ç√≥≈º je w lokalu</span></p>
          </form>
        </div>
      </div>

      <!-- if logged -->
      <div id="accountLoggedIn" class="stack" style="display:none">
        <div class="card account-hero">
          <div class="avatar" id="avatar">MS</div>
          <div>
            <div class="account-name" id="accName">U≈ºytkownik</div>
            <div class="account-mail" id="accEmail">user@mail.com</div>
            <div class="tiny" style="margin-top:2px">Zalogowano</div>
          </div>
          <div style="margin-left:auto">
            <button class="btn btn-ghost btn-small" id="logoutBtn">Wyloguj</button>
          </div>
        </div>

        <div class="card">
          <div class="subtitle">Ustawienia</div>
          <div class="list">
            <div class="list-item" data-open="personal">
              <div class="list-left">
                <div class="li-ico"><i class="fa-solid fa-user"></i></div>
                <div>
                  <div class="li-title">Dane osobowe</div>
                  <div class="li-sub">Imiƒô, telefon, email</div>
                </div>
              </div>
              <i class="fa-solid fa-chevron-right" style="opacity:.6"></i>
            </div>

            <div class="list-item" data-open="language">
              <div class="list-left">
                <div class="li-ico"><i class="fa-solid fa-language"></i></div>
                <div>
                  <div class="li-title">Jƒôzyk</div>
                  <div class="li-sub">Polski / English</div>
                </div>
              </div>
              <i class="fa-solid fa-chevron-right" style="opacity:.6"></i>
            </div>

            <div class="list-item" data-open="about">
              <div class="list-left">
                <div class="li-ico"><i class="fa-solid fa-circle-info"></i></div>
                <div>
                  <div class="li-title">O nas</div>
                  <div class="li-sub">MilkShake Bar S≈Çupsk & Rowy</div>
                </div>
              </div>
              <i class="fa-solid fa-chevron-right" style="opacity:.6"></i>
            </div>

            <div class="list-item" data-open="help">
              <div class="list-left">
                <div class="li-ico"><i class="fa-solid fa-life-ring"></i></div>
                <div>
                  <div class="li-title">Pomoc</div>
                  <div class="li-sub">Kontakt i informacje</div>
                </div>
              </div>
              <i class="fa-solid fa-chevron-right" style="opacity:.6"></i>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- SUBPAGES (Account) -->
  <section class="subpage" id="page-personal">
    <div class="sub-top">
      <button class="back-btn" data-back><i class="fa-solid fa-arrow-left"></i></button>
      <div class="sub-title">Dane osobowe</div>
    </div>
    <div class="container stack">
      <div class="card stack">
        <div>
          <label>Imiƒô i nazwisko</label>
          <input id="personalName" placeholder="Jan Kowalski">
        </div>
        <div>
          <label>Telefon</label>
          <input id="personalPhone" placeholder="+48 700 000 000">
        </div>
        <div>
          <label>Email</label>
          <input id="personalEmail" placeholder="mail@adres.com">
        </div>
        <button class="btn btn-primary btn-wide" id="savePersonalBtn">
          Zapisz zmiany
        </button>
      </div>
      <p class="tiny">Dane sƒÖ lokalne (localStorage). Po podpiƒôciu backendu bƒôdƒÖ synchronizowane.</p>
    </div>
  </section>

  <section class="subpage" id="page-language">
    <div class="sub-top">
      <button class="back-btn" data-back><i class="fa-solid fa-arrow-left"></i></button>
      <div class="sub-title">Jƒôzyk</div>
    </div>
    <div class="container stack">
      <div class="card stack">
        <button class="btn btn-ghost btn-wide" data-lang="pl">
          üáµüá± Polski
        </button>
        <button class="btn btn-ghost btn-wide" data-lang="en">
          üá¨üáß English
        </button>
      </div>
      <p class="tiny">Na razie tylko wyb√≥r jƒôzyka. Teksty podmienimy, gdy chcesz.</p>
    </div>
  </section>

  <section class="subpage" id="page-about">
    <div class="sub-top">
      <button class="back-btn" data-back><i class="fa-solid fa-arrow-left"></i></button>
      <div class="sub-title">O nas</div>
    </div>
    <div class="container stack">
      <div class="card">
        <div class="subtitle">MilkShake Bar</div>
        <p class="muted">
          Kremowe milkshake‚Äôi, desery i burgery w S≈Çupsku oraz Rowach.
          Tworzymy miejsce pe≈Çne energii i s≈Çodkich wspomnie≈Ñ.
        </p>
        <div class="stack" style="margin-top:10px">
          <div class="list-item" style="cursor:default">
            <div class="list-left">
              <div class="li-ico"><i class="fa-solid fa-location-dot"></i></div>
              <div>
                <div class="li-title">S≈Çupsk</div>
                <div class="li-sub">Szczeci≈Ñska 17</div>
              </div>
            </div>
          </div>
          <div class="list-item" style="cursor:default">
            <div class="list-left">
              <div class="li-ico"><i class="fa-solid fa-location-dot"></i></div>
              <div>
                <div class="li-title">Rowy</div>
                <div class="li-sub">Wydmowa 2</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="subpage" id="page-help">
    <div class="sub-top">
      <button class="back-btn" data-back><i class="fa-solid fa-arrow-left"></i></button>
      <div class="sub-title">Pomoc</div>
    </div>
    <div class="container stack">
      <div class="card stack">
        <div class="subtitle">Kontakt</div>
        <p class="muted">
          Je≈õli potrzebujesz pomocy z rezerwacjƒÖ lub punktami, zapytaj obs≈Çugƒô w lokalu
          lub skontaktuj siƒô telefonicznie.
        </p>
        <div class="list-item" style="cursor:default">
          <div class="list-left">
            <div class="li-ico"><i class="fa-solid fa-phone"></i></div>
            <div>
              <div class="li-title">Telefon</div>
              <div class="li-sub">+48 733 033 100</div>
            </div>
          </div>
        </div>

        <div class="subtitle" style="margin-top:8px">Developer aplikacji</div>
        <p class="muted">
          Aplikacja zosta≈Ça wykonana przez <b>Velorie Design</b>.
        </p>
        <a class="btn btn-primary btn-wide" href="https://www.desing.velorie.pl" target="_blank" rel="noopener">
          Przejd≈∫ do strony developera
          <i class="fa-solid fa-arrow-up-right-from-square"></i>
        </a>
      </div>
    </div>
  </section>

  <!-- Bottom floating nav -->
  <nav class="bottom-nav" aria-label="Dolne menu">
    <div class="nav-wrap">
      <button class="nav-btn active" data-tab="points">
        <i class="fa-solid fa-star"></i>
        <div class="lbl">Punkty</div>
      </button>
      <button class="nav-btn" data-tab="rewards">
        <i class="fa-solid fa-gift"></i>
        <div class="lbl">Nagrody</div>
      </button>
      <button class="nav-btn" data-tab="res">
        <i class="fa-solid fa-calendar-check"></i>
        <div class="lbl">Rezerwacje</div>
      </button>
      <button class="nav-btn" data-tab="news">
        <i class="fa-solid fa-bolt"></i>
        <div class="lbl">News</div>
      </button>
      <button class="nav-btn" data-tab="account">
        <i class="fa-solid fa-user"></i>
        <div class="lbl">Konto</div>
      </button>
    </div>
  </nav>

  <!-- Toast -->
  <div id="toast" class="toast">
    <i class="fa-solid fa-check-circle"></i><span id="toastText"></span>
  </div>

  <script>
    // ---------- PWA: register SW ----------
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => navigator.serviceWorker.register("sw.js"));
    }

    // ---------- Tab navigation ----------
    const tabs = {
      points: document.getElementById("tab-points"),
      rewards: document.getElementById("tab-rewards"),
      res: document.getElementById("tab-res"),
      news: document.getElementById("tab-news"),
      account: document.getElementById("tab-account"),
    };
    const navButtons = document.querySelectorAll(".nav-btn");
    function openTab(name){
      Object.entries(tabs).forEach(([k, el]) => el.classList.toggle("active", k===name));
      navButtons.forEach(b => b.classList.toggle("active", b.dataset.tab===name));
      window.scrollTo({top:0, behavior:"smooth"});
    }
    navButtons.forEach(btn => btn.addEventListener("click", () => openTab(btn.dataset.tab)));

    // quick actions
    document.querySelectorAll("[data-go]").forEach(b=>{
      b.addEventListener("click", ()=> openTab(b.dataset.go));
    });

    // ---------- Toast ----------
    const toast = document.getElementById("toast");
    const toastText = document.getElementById("toastText");
    function showToast(msg, danger=false){
      toastText.textContent = msg;
      toast.classList.toggle("danger", danger);
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"), 3200);
    }

    // ---------- Storage helpers ----------
    const store = {
      get(key, fallback){
        try { return JSON.parse(localStorage.getItem(key)) ?? fallback; }
        catch { return fallback; }
      },
      set(key, val){ localStorage.setItem(key, JSON.stringify(val)); }
    };

    // ---------- Points ----------
    const pointsCountEl = document.getElementById("pointsCount");
    const pointsPillEl  = document.getElementById("pointsPill");
    const pointsProgressEl = document.getElementById("pointsProgress");
    const historyEl = document.getElementById("pointsHistory");

    function renderPoints(){
      const pts = store.get("points", 0);
      pointsCountEl.textContent = pts;
      pointsPillEl.textContent = pts + " pkt";
      const pct = Math.min(100, (pts % 100));
      pointsProgressEl.style.width = pct + "%";

      const hist = store.get("pointsHistory", []);
      historyEl.innerHTML = hist.length
        ? hist.map(h => `<div style="padding:8px 0;border-bottom:1px dashed rgba(0,0,0,.06)">
              <b>${h.text}</b><div class="tiny">${h.date}</div>
           </div>`).join("")
        : `<div class="empty">
            <div class="icon"><i class="fa-solid fa-clock"></i></div>
            <div>
              <b>Tu pojawi siƒô historia punkt√≥w</b>
              <div class="tiny">Za pierwsze zakupy punkty naliczƒÖ siƒô automatycznie.</div>
            </div>
           </div>`;
    }

    function addPoints(amount, reason="Dodano punkty"){
      const pts = store.get("points", 0) + amount;
      store.set("points", pts);
      const hist = store.get("pointsHistory", []);
      hist.unshift({ text: `${reason}: +${amount} pkt`, date: new Date().toLocaleString("pl-PL") });
      store.set("pointsHistory", hist.slice(0, 50));
      renderPoints(); renderRewards();
      showToast(`Dodano ${amount} pkt üß°`);
    }

    document.querySelectorAll("[data-add]").forEach(btn=>{
      btn.addEventListener("click", ()=> addPoints(Number(btn.dataset.add), "Testowe naliczenie"));
    });

    document.getElementById("scanBtn").addEventListener("click", ()=>{
      showToast("Skaner QR ‚Äî do podpiƒôcia z backendem üòâ");
    });

    // ---------- Rewards ----------
    const rewards = [
      { id:"shake_small", title:"Milkshake ma≈Çy", cost:80, icon:"fa-ice-cream", desc:"Dowolny smak" },
      { id:"shake_big", title:"Milkshake du≈ºy", cost:120, icon:"fa-glass-whiskey", desc:"Ekstra dodatki" },
      { id:"dessert", title:"Dowolny deser", cost:150, icon:"fa-cookie-bite", desc:"Z gabloty" },
      { id:"breakfast", title:"≈öniadanie", cost:200, icon:"fa-egg", desc:"Na miejscu" },
    ];
    const rewardsListEl = document.getElementById("rewardsList");

    function renderRewards(){
      const pts = store.get("points", 0);
      rewardsListEl.innerHTML = rewards.map(r => {
        const disabled = pts < r.cost;
        return `
          <div class="reward">
            <div class="reward-left">
              <div class="reward-ico"><i class="fa-solid ${r.icon}"></i></div>
              <div>
                <div class="reward-title">${r.title}</div>
                <div class="tiny">${r.desc}</div>
                <div class="muted">Koszt: <b>${r.cost} pkt</b></div>
              </div>
            </div>
            <div style="text-align:right;min-width:88px">
              <div style="font-weight:900">${r.cost} pkt</div>
              <button class="btn btn-primary btn-small"
                ${disabled ? "disabled style='opacity:.5;cursor:not-allowed'" : ""}
                data-redeem="${r.id}">
                Wymie≈Ñ
              </button>
            </div>
          </div>
        `;
      }).join("");

      rewardsListEl.querySelectorAll("[data-redeem]").forEach(btn=>{
        btn.addEventListener("click", ()=> redeemReward(btn.dataset.redeem));
      });
    }

    function redeemReward(id){
      const r = rewards.find(x=>x.id===id);
      if(!r) return;
      const pts = store.get("points", 0);
      if(pts < r.cost){ showToast("Masz za ma≈Ço punkt√≥w üòÖ", true); return; }
      store.set("points", pts - r.cost);
      const hist = store.get("pointsHistory", []);
      hist.unshift({ text: `Wymieniono: -${r.cost} pkt (${r.title})`, date: new Date().toLocaleString("pl-PL") });
      store.set("pointsHistory", hist);
      renderPoints(); renderRewards();
      showToast(`Nagroda odebrana: ${r.title} üéÅ`);
      openTab("rewards");
    }

    // ---------- News ----------
    const news = store.get("news", [
      { title:"Happy Hour 15‚Äì18!", date:"Dzisiaj", body:"Wpadnij na promo milkshake‚Äôy i desery. Szczeg√≥≈Çy w lokalu." },
      { title:"Nowy smak: Mango-Lassi", date:"Ten tydzie≈Ñ", body:"Egzotyczna nowo≈õƒá ju≈º w menu w S≈Çupsku i Rowach." },
    ]);
    const newsListEl = document.getElementById("newsList");
    function renderNews(){
      newsListEl.innerHTML = news.length ? news.map(n => `
        <div class="news">
          <div class="date">${n.date}</div>
          <h4>${n.title}</h4>
          <p class="muted">${n.body}</p>
        </div>
      `).join("") : `
        <div class="empty">
          <div class="icon"><i class="fa-solid fa-bolt"></i></div>
          <div><b>Brak aktualno≈õci</b><div class="tiny">Sprawd≈∫ ponownie p√≥≈∫niej.</div></div>
        </div>
      `;
    }

    // ---------- Reservations ----------
    const resForm = document.getElementById("reservationForm");
    const resListEl = document.getElementById("reservationsList");

    function renderReservations(){
      const list = store.get("reservations", []);
      resListEl.innerHTML = list.length
        ? list.map(r => `
            <div class="res-item">
              <b>${r.date} ‚Ä¢ ${r.time}</b>
              <div>${r.guests} os. ‚Ä¢ ${r.room}</div>
              <div class="tiny">${r.name}, ${r.phone}</div>
              ${r.notes ? `<div class="tiny">Uwagi: ${r.notes}</div>` : ""}
              <div class="divider"></div>
              <div class="res-actions">
                <button class="btn btn-ghost btn-small" data-del="${r.id}">Usu≈Ñ</button>
              </div>
            </div>
          `).join("")
        : `<div class="empty">
            <div class="icon"><i class="fa-solid fa-calendar-check"></i></div>
            <div>
              <b>Brak rezerwacji</b>
              <div class="tiny">Zarezerwuj stolik ‚Äî zajmie to chwilkƒô.</div>
            </div>
           </div>`;

      resListEl.querySelectorAll("[data-del]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const id = btn.dataset.del;
          const newList = store.get("reservations", []).filter(x=>x.id!==id);
          store.set("reservations", newList);
          renderReservations();
          showToast("Rezerwacja usuniƒôta");
        });
      });
    }

    resForm.addEventListener("submit", async (e)=>{
      e.preventDefault();
      const fd = new FormData(resForm);
      const data = Object.fromEntries(fd.entries());
      const list = store.get("reservations", []);
      list.unshift({ ...data, id: crypto.randomUUID() });
      store.set("reservations", list);
      resForm.reset();
      renderReservations();
      showToast("Rezerwacja zapisana üß°");
      openTab("res");
    });

    (() => {
      const dateInput = resForm.querySelector("input[name='date']");
      const iso = new Date().toISOString().split("T")[0];
      dateInput.min = iso;
    })();

    // ---------- Account / Auth (UI + local demo) ----------
    const loggedOutEl = document.getElementById("accountLoggedOut");
    const loggedInEl  = document.getElementById("accountLoggedIn");
    const avatarEl = document.getElementById("avatar");
    const accNameEl = document.getElementById("accName");
    const accEmailEl = document.getElementById("accEmail");

    function setUser(user){
      store.set("user", user);
      renderAccount();
    }
    function renderAccount(){
      const user = store.get("user", null);
      const isLogged = !!user;
      loggedOutEl.style.display = isLogged ? "none" : "flex";
      loggedInEl.style.display  = isLogged ? "flex" : "none";
      if(isLogged){
        const initials = (user.name || "MilkShake User").split(" ").map(w=>w[0]).slice(0,2).join("").toUpperCase();
        avatarEl.textContent = initials;
        accNameEl.textContent = user.name || "U≈ºytkownik";
        accEmailEl.textContent = user.email || "";
      }
    }

    // Placeholder handlers:
    document.getElementById("loginGoogle").addEventListener("click", ()=>{
      // TODO: tu podpinasz Google OAuth / Firebase / backend
      setUser({ provider:"google", name:"U≈ºytkownik Google", email:"google@user.com" });
      showToast("Zalogowano przez Google ‚úÖ");
      openTab("account");
    });

    document.getElementById("loginApple").addEventListener("click", ()=>{
      // TODO: tu podpinasz Sign in with Apple
      setUser({ provider:"apple", name:"U≈ºytkownik Apple", email:"apple@user.com" });
      showToast("Zalogowano przez Apple ‚úÖ");
      openTab("account");
    });

    document.getElementById("loginEmailForm").addEventListener("submit", (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const email = fd.get("email");
      // TODO: tu normalne logowanie do backendu
      setUser({ provider:"email", name: email.split("@")[0], email });
      showToast("Zalogowano ‚úÖ");
      openTab("account");
      e.target.reset();
    });

    document.getElementById("logoutBtn").addEventListener("click", ()=>{
      store.set("user", null);
      renderAccount();
      showToast("Wylogowano");
    });

    // personal data save
    const personalName = document.getElementById("personalName");
    const personalPhone = document.getElementById("personalPhone");
    const personalEmail = document.getElementById("personalEmail");
    document.getElementById("savePersonalBtn").addEventListener("click", ()=>{
      const user = store.get("user", {}) || {};
      user.name = personalName.value || user.name;
      user.phone = personalPhone.value || user.phone;
      user.email = personalEmail.value || user.email;
      setUser(user);
      showToast("Dane zapisane");
      closeSubpages();
    });

    function preloadPersonal(){
      const user = store.get("user", {}) || {};
      personalName.value = user.name || "";
      personalPhone.value = user.phone || "";
      personalEmail.value = user.email || "";
    }

    // language select demo
    document.querySelectorAll("[data-lang]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        store.set("lang", btn.dataset.lang);
        showToast("Zapisano jƒôzyk: " + (btn.dataset.lang==="pl"?"Polski":"English"));
        closeSubpages();
      });
    });

    // ---------- Subpages navigation ----------
    const subpages = {
      personal: document.getElementById("page-personal"),
      language: document.getElementById("page-language"),
      about: document.getElementById("page-about"),
      help: document.getElementById("page-help")
    };

    function openSubpage(name){
      closeSubpages();
      subpages[name]?.classList.add("active");
      if(name==="personal") preloadPersonal();
    }
    function closeSubpages(){
      Object.values(subpages).forEach(p=>p.classList.remove("active"));
    }
    document.querySelectorAll("[data-back]").forEach(b=>b.addEventListener("click", closeSubpages));

    document.querySelectorAll(".list-item[data-open]").forEach(item=>{
      item.addEventListener("click", ()=> openSubpage(item.dataset.open));
    });

    // ---------- Init ----------
    renderPoints();
    renderRewards();
    renderNews();
    renderReservations();
    renderAccount();

    // Default tab = Points
    openTab("points");
  </script>
</body>
</html>
